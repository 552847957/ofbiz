<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<section xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="5.0"
    xmlns:xl="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://docbook.org/ns/docbook"
    xmlns="http://docbook.org/ns/docbook">

  <title>Comment écrire un document avec docBook (fichier d'aide)</title>
  <para>Ce fichier a pour objectif de contenir un exemple de ce qu'il est possible de mettre dans un fichier docbook utilisé en tant qu'aide d'ofbiz.
    Au delà de sa lecture en tant qu'aide, il faut surtout l'ouvrir en tant que fichier xml. Pour l'affichage de l'aide, seules quelques balises
    docbook sont interprétées, ce fichier contient l'ensemble de celles qui le sont.</para>
  <para>L'interprétation de ces balises est réalisée par un fichier ftl HelpTemplate.ftl</para>
  <para>Il est conseillé de prendre un indentation uniquement de 2 caractères, afin de limiter la largeur du fichier.</para>
  <para>&amp;nbsp;</para>
  <para>La balise para permet de gérer les paragraphes et, pour l'instant, c'est ce qui permet de gérer les retours à la ligne choisis. 
    Le nombre d'espace ou les retours à la ligne dans le texte docbook sont ignorés, par exemple une ligne vide entre 2 para dans le fichier docbook 
    ne génère pas d'espace entre les paragraphes. Quand il est nécessaire de forçer ce comportement, de manière exceptionnelle, il est possible 
    d'inclure du code html. Par exemple pour générer des espaces ou des retours à la ligne, mais attention lors de la génération de pdf ou selon le 
    type de transformation en html, &lt;br \>ces éléments apparaitront et ne seront pas interprétés.
      <programlisting>
    &amp;lt;para>Petit paragraphe&amp;lt;/para>
    pour insérer une ligne blanche entre deux paragraphe &amp;lt;para>&amp;amp;nbsp;&amp;lt;/para>
    &amp;lt;para>Petit paragraphe avec un retour &amp;amp;lt;br \>à la ligne au milieu&amp;lt;/para>
      </programlisting> 
    </para>
  <section>
    <title><anchor xml:id="WhatIsSection"/> Qu'est ce qu'une section (H2)</title>
    <para>Lorsque l'utilisateur demande l'affichage de l'aide (click sur l'icone) le système recherche le (ou les fichiers) associé(s) et l'affiche
      (pour plus de détail sur l'organisation de l'aide lire <link xl:href="showHelp?helpTopic=DOCUMENTATION_SYSTEM">Principes et organisation de la 
      documentation Apache OFBiz</link>).</para>
    <para>La balise title du fichier sera le titre de la page ( H1 en html), et il est possible d'avoir des sous-section (H2), autant qu'on en veut
      et avec autant de niveau que voulu (H3, H4, H5, ...), la balise est là pour ça. Dans la balise title, il est possible de mettre une balise 
      anchor (ancre) pour pouvoir faire un lien (interne ou externe) directement vers cette section </para>
    <section>
      <title>Sous-section (H3)</title>
      <para>et on pourrait continuer ....</para>
    </section>
  </section>
  <section>
    <title>Liste d'élément</title>
    <section>
      <title>Exemple d'une liste numérotée</title>
      <para>Il y aura un chiffre en début de chaque ligne.</para>
      <orderedlist>
        <listitem><para>Premier élément de ma liste</para></listitem>
        <listitem><para>Deuxiéme élément</para></listitem>
        <listitem><para>Troisiéme ...</para></listitem>
        <listitem><para>4 iém ...</para></listitem>
        <listitem><para>et ainsi de suite...</para></listitem>
      </orderedlist>
    </section>
    <section>
      <title>Exemple de liste à point</title>
      <para>Il y aura jutse un signe (un point)au début de chaque ligne.</para>
      <itemizedlist>
        <listitem><para>Premier élément de ma liste</para></listitem>
        <listitem><para>Deuxiéme élément</para></listitem>
        <listitem><para>Troisiéme ...</para></listitem>
        <listitem><para>4 iém ...</para></listitem>
        <listitem><para>et ainsi de suite...</para></listitem>
      </itemizedlist>
    </section>
    </section>
  <section>
    <title>Exemples de formattage de texte spécifique</title>
    <para>Pour le formattage il y a deux notions :
      <itemizedlist>
        <listitem><para>du formattage en <emphasis role="caution">cours</emphasis> de texte</para></listitem>
        <listitem><para>un paragraphe avec un formatage particulier, dans ce cas, il est possible de mettre un titre pour ce paragraphe, mais
          ce n'est pas obligatoire. Actuellement, dans tous les cas, ce titre sera de niveau H3</para></listitem>
      </itemizedlist>
    </para>
    <para>Chaque formattage correspond à un style, actuellement 4 ont été défini
      <itemizedlist>
        <listitem><para>caution : prudence (ou attention mais plus faible que warning)</para></listitem>
        <listitem><para>important : comme son nom l'indique</para></listitem>
        <listitem><para>note : comme son nom l'indique</para></listitem>
        <listitem><para>tip  : astuce</para></listitem>
        <listitem><para>warning : attention, mais plus fort que caution</para></listitem>
      </itemizedlist>
    </para>
    <caution>
        <title>Prudence</title>
        <para>Avec le texte qui explique à quoi faire attention, le titre n'est pas obligatoire</para>
    </caution>
    <important>
        <title>Important</title>
        <para>Voici le texte qui est important</para>
    </important>
    <note>
        <title>une Note</title>
        <para>et voici le texte de la note, il peut inclure des section ou autre</para>
    </note>
    <tip>
        <title>Astuce</title>
        <para>Ne pas mettre le titre ou plutot inclure du formattage en cours de texte</para>
    </tip>
    <warning>
        <para>Attention, en voila enfin un sans titre</para>
    </warning>
  </section>
  <section>
    <title>Inclusion Possible</title>
    <para>Lors de l'affichage d'une aide, en fonction des liens entre éléments de contenu, il est possible d'afficher plusieurs éléments de contenu
      <itemizedlist>
        <listitem><para>un autre fichier d'aide</para></listitem>
        <listitem><para>une image</para></listitem>
        <listitem><para>un formulaire (ou un écran) afin de pouvoir voir l'aide de chaque champ</para></listitem>
      </itemizedlist>
    </para>
    <para>Lors de l'affichage de l'aide sur la <link xl:href="showHelp?helpTopic=EXAMPLE_main">page d'accueil</link> du composant example, 
      2 fichiers d'aide sont affichés.</para>
    <para>Exemple d'affichage d'une image, <emphasis role="caution">Seul le champ fileref est obligoire, mais pour une bonne mise en page, les 
      champs width et depth sont conseillés</emphasis></para>
    <para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="/example/images/MgmtPage.png" width="638" depth="478"/>
        </imageobject>
        <textobject><phrase>Une page portail type</phrase></textobject>
        <caption>Schema d'une page portail type de gestion de recherche et gestion objet métier majeur</caption>
      </mediaobject>
    </para>
    <para>&amp;nbsp;</para>
    <para>Afin de permettre à l'utilisateur de pouvoir visualiser l'aide de chaque champ (qui apparait quand la souris est positionné sur le label
      du champ), il est intéressant, quelque fois, de faire apparaitre une form dans un texte d'aide. Pour cela, il faut créer un élément de contenu
      associé dataresource qui est associé à un screen.xml, avec un dataTemplateTypeId="SCREEN_COMBINED". Il est conseillé de faire un screen
      dédié qui n'inclus pas le decorator general.&lt;br \>
      Il faut ensuite associer l'élément de contenu avec le même père que l'aide avec lequel le screen doit s'afficher, mais avec un numéro de séquence
      supérieur. Voici les données pour l'affichage du screen ci-dessous.
      <programlisting>
    &amp;lt;DataResource dataResourceId="EXAMPLE_EditForm"  objectInfo="component://example/widget/example/ExampleScreens.xml#ExampleEditForm" dataResourceTypeId="URL_RESOURCE" dataTemplateTypeId="SCREEN_COMBINED"/>
    &amp;lt;Content contentId="EXAMPLE_EditForm" contentTypeId="DOCUMENT" contentName="Example Fields" dataResourceId="EXAMPLE_EditForm"/>
    &amp;lt;ContentAssoc contentId="HELP_EXAMPLE_docbook" contentIdTo="EXAMPLE_EditForm" mapKey="EXAMPLE_docbook" fromDate="2006-01-12 01:01:01" sequenceNum="005" contentAssocTypeId="INSTANCE"/>
      </programlisting> 
    </para>
  </section>
</section>

