<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<project>
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.apache.ofbiz</groupId>
    <artifactId>ofbiz-parent</artifactId>
    <version>TRUNK</version>
    <relativePath>../pom.xml</relativePath>
  </parent>
  <artifactId>ofbiz-component</artifactId>
  <packaging>pom</packaging>
  <properties>
    <component.build.dir>build</component.build.dir>
    <component.src.dir>src</component.src.dir>
    <component.lib.dir>lib</component.lib.dir>
  </properties>

  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.apache.ofbiz</groupId>
        <artifactId>ofbiz-parent</artifactId>
        <version>TRUNK</version>
        <scope>import</scope>
        <type>pom</type>
      </dependency>
    </dependencies>
  </dependencyManagement>

  <build>
    <directory>${component.build.dir}/lib</directory>
    <outputDirectory>${component.build.dir}/classes</outputDirectory>
    <testOutputDirectory>${component.build.dir}/test-classes</testOutputDirectory>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>${component.src.dir}</sourceDirectory>
    <testSourceDirectory>${component.src.dir}</testSourceDirectory>
    <resources>
      <resource>
        <directory>${component.src.dir}</directory>
        <excludes>
          <exclude>main/**</exclude>
          <exclude>test/**</exclude>
        </excludes>
        <includes>
          <include>**/*.properties</include>
          <include>**/*.groovy</include>
          <include>**/*.xml</include>
          <include>**/*.bsh</include>
          <include>**/*.logic</include>
          <include>**/*.hs</include>
          <include>**/*.jacl</include>
          <include>**/*.py</include>
          <include>META-INF/**</include>
        </includes>
      </resource>
      <resource>
        <directory>${component.src.dir}/main/resources</directory>
      </resource>
      <resource>
        <directory>dtd</directory>
        <includes>
          <include>*.dtd</include>
        </includes>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>${component.src.dir}/test/resources</directory>
        <includes>
          <include>META-INF/**</include>
        </includes>
      </testResource>
    </testResources>
    <scriptSourceDirectory>scripts</scriptSourceDirectory>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-enforcer-plugin</artifactId>
          <version>1.4</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.5.3</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.3</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-resources-plugin</artifactId>
          <version>2.7</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.3</version>
        </plugin>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>rmic-maven-plugin</artifactId>
          <version>1.2.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jar-plugin</artifactId>
          <version>2.2</version>
        </plugin>
        <plugin>
          <groupId>org.commonjava.maven.plugins</groupId>
          <artifactId>directory-maven-plugin</artifactId>
          <version>0.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.18.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-clean-plugin</artifactId>
          <version>2.3</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-javadoc-plugin</artifactId>
          <version>2.10.3</version>
        </plugin>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>cobertura-maven-plugin</artifactId>
          <version>2.7</version>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-clean-plugin</artifactId>
        <configuration>
          <filesets>
            <fileset>
              <directory>.</directory>
              <includes>
                <include>${component.build.dir}</include>
              </includes>
            </fileset>
          </filesets>
        </configuration>
        <!--
        <executions>
          <execution>
            <id>make-assembly</id>
            <phase>initialize</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
-->
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <executions>
          <execution>
            <id>enforce-maven</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <configuration>
              <rules>
                <requireMavenVersion>
                  <version>3.0</version>
                </requireMavenVersion>
                <requireJavaVersion>
                  <version>1.7</version>
                </requireJavaVersion>
              </rules>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <inherited>false</inherited>
        <configuration>
          <descriptors>
            <descriptor>${project.basedir}/assembly/LICENSE+NOTICE.xml</descriptor>
          </descriptors>
        </configuration>
        <executions>
          <execution>
            <id>make-assembly</id>
            <phase>initialize</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <configuration>
          <includes>**/*</includes>
          <overWriteReleases>true</overWriteReleases>
          <overWriteSnapshots>true</overWriteSnapshots>
        </configuration>
        <executions>
          <execution>
            <id>unpack-LICENSE+NOTICE</id>
            <phase>process-resources</phase>
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>org.apache.ofbiz</groupId>
                  <artifactId>ofbiz-parent</artifactId>
                  <version>TRUNK</version>
                  <type>zip</type>
                  <classifier>assembly-LICENSE+NOTICE</classifier>
                  <overWrite>true</overWrite>
                  <outputDirectory>${project.build.outputDirectory}/META-INF</outputDirectory>
                  <includes>*</includes>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
          <execution>
            <id>unpack-LICENSE+NOTICE-test</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>org.apache.ofbiz</groupId>
                  <artifactId>ofbiz-parent</artifactId>
                  <version>TRUNK</version>
                  <type>zip</type>
                  <classifier>assembly-LICENSE+NOTICE</classifier>
                  <overWrite>true</overWrite>
                  <outputDirectory>${project.build.testOutputDirectory}/META-INF</outputDirectory>
                  <includes>*</includes>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
          <compilerArgs>
            <arg>-Xlint:-path</arg>
            <arg>-Xmaxerrs</arg><arg>10000</arg>
            <!--
            Please leave this line here.  It makes it easier to enable/disable it.
            <arg>-Xlint:unchecked</arg>
            -->
          </compilerArgs>
        </configuration>
        <executions>
          <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <configuration>
              <excludes>
                <exclude>**/test/*.java</exclude>
              </excludes>
            </configuration>
          </execution>
          <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <configuration>
              <testIncludes>
                <testInclude>**/test/*.java</testInclude>
              </testIncludes>
              <testExcludes>
                <testExclude>*</testExclude>
              </testExcludes>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <executions>
          <execution>
            <id>default-test-jar</id>
            <goals>
              <goal>test-jar</goal>
            </goals>
            <configuration>
              <testIncludes>
                <testInclude>**/test/*</testInclude>
                <testInclude>**/META-INF/*</testInclude>
              </testIncludes>
              <testExcludes>
                <testExclude>**</testExclude>
              </testExcludes>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <createDependencyReducedPom>false</createDependencyReducedPom>
          <additionalClasspathElements>
            <additionalClasspathElement>${project.basedir}/config</additionalClasspathElement>
          </additionalClasspathElements>
          <systemPropertyVariables>
            <ofbiz.home>${ofbiz.home.dir}</ofbiz.home>
          </systemPropertyVariables>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <configuration>
          <formats>
            <format>html</format>
            <format>xml</format>
          </formats>
          <instrumentation>
            <includes>
              <include>org/ofbiz/**/*.class</include>
            </includes>
          </instrumentation>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.commonjava.maven.plugins</groupId>
        <artifactId>directory-maven-plugin</artifactId>
        <configuration>
          <property>ofbiz.home.dir</property>
          <project>
            <groupId>org.apache.ofbiz</groupId>
            <artifactId>ofbiz-parent</artifactId>
          </project>
        </configuration>
        <executions>
          <execution>
            <id>ofbiz-home-dir.clean</id>
            <goals>
              <goal>highest-basedir</goal>
            </goals>
            <phase>pre-clean</phase>
          </execution>
          <execution>
            <id>ofbiz-home-dir.default</id>
            <goals>
              <goal>highest-basedir</goal>
            </goals>
            <phase>validate</phase>
          </execution>
          <execution>
            <id>ofbiz-home-dir.site</id>
            <goals>
              <goal>highest-basedir</goal>
            </goals>
            <phase>pre-site</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <executions>
          <execution>
            <id>aggregate</id>
            <goals>
              <goal>aggregate</goal>
            </goals>
            <phase>site</phase>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>

  <reporting>
    <outputDirectory>${component.build.dir}/site</outputDirectory>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.10.3</version>
        <reportSets>
          <reportSet>
            <id>non-aggregate</id>
            <reports>
              <report>javadoc</report>
            </reports>
          </reportSet>
          <reportSet>
            <id>aggregate</id>
            <reports>
              <report>aggregate</report>
            </reports>
          </reportSet>
        </reportSets>
      </plugin>
    </plugins>
  </reporting>

</project>
